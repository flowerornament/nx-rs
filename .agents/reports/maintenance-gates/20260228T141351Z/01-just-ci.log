$ just ci
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.05s
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.04s
     Running unittests src/lib.rs (target/debug/deps/nx_rs-a312a8dd49fbabe8)

running 368 tests
test app::tests::resolve_repo_root_prefers_env_var ... ok
test app::tests::resolve_repo_root_prefers_git_root_over_home_default ... ok
test app::tests::resolve_repo_root_falls_back_to_home_default ... ok
test app::tests::resolve_repo_root_errors_without_any_source ... ok
test cli::tests::preprocess_args_no_subcommand_keeps_argv_shape ... ok
test cli::tests::preprocess_args_flag_passes_through ... ok
test cli::tests::preprocess_args_known_command_passes_through ... ok
test cli::tests::preprocess_args_package_name_inserts_install ... ok
test cli::tests::preprocess_args_search_command_passes_through ... ok
test cli::tests::preprocess_args_secret_alias_passes_through ... ok
test cli::tests::preprocess_args_typo_like_token_inserts_install ... ok
test cli::tests::preprocess_args_uninstall_alias_passes_through ... ok
test cli::tests::known_commands_match_spec_plus_intentional_extensions ... ok
test cli::tests::info_parses_verbose_option ... ok
test cli::tests::global_verbose_flag_parses_at_root ... ok
test cli::tests::list_parses_verbose_option ... ok
test cli::tests::global_json_and_unicode_flags_parse_at_root ... ok
test cli::tests::known_commands_stay_in_sync_with_clap_subcommand_surface ... ok
test cli::tests::remove_parses_model_option ... ok
test cli::tests::install_parses_explain_engine_and_model_options ... ok
test cli::tests::no_args_requests_help_instead_of_install_inference ... ok
test cli::tests::install_exposes_spec_options_via_metadata ... ok
test cli::tests::list_exposes_spec_options_and_globals_via_metadata ... ok
test cli::tests::info_exposes_spec_options_and_globals_via_metadata ... ok
test cli::tests::remaining_spec_subcommands_expose_expected_local_long_flags ... ok
test cli::tests::upgrade_exposes_spec_options_via_metadata ... ok
test cli::tests::secret_add_parses_key_alias_flag ... ok
test cli::tests::secret_add_parses_name_flag_key ... ok
test cli::tests::upgrade_parses_verbose_option ... ok
test cli::tests::root_help_lists_spec_globals_and_verbose_alias ... ok
test cli::tests::secret_add_parses_positional_key ... ok
test cli::tests::secret_add_help_includes_examples_and_double_dash_note ... ok
test commands::install::tests::lookup_names_includes_attr_and_language_bare_name ... ok
test commands::install::tests::parse_source_choice_empty_defaults_to_first ... ok
test commands::install::tests::platform_resolution_errors_without_same_source_fallback ... ok
test commands::install::tests::platform_resolution_skips_unavailable_same_source_and_uses_later_fallback ... ok
test commands::install::tests::platform_resolution_uses_primary_when_available ... ok
test commands::install::tests::platform_resolution_uses_same_source_fallback_when_primary_unavailable ... ok
test commands::install::tests::parse_source_choice_accepts_valid_number ... ok
test commands::install::tests::parse_source_choice_rejects_cancel_and_invalid ... ok
test commands::install::tests::post_install_runs_rebuild_when_requested ... ok
test commands::install::tests::post_install_skips_rebuild_in_dry_run ... ok
test commands::install::tests::select_candidate_index_dry_run_bypasses_prompts ... ok
test commands::install::tests::select_candidate_index_multi_uses_numbered_prompt ... ok
test commands::install::tests::post_install_skips_rebuild_when_nothing_installed ... ok
test commands::install::tests::select_candidate_index_single_requires_confirmation ... ok
test commands::install::tests::post_install_skips_rebuild_without_flag ... ok
test commands::install::tests::select_candidate_index_yes_bypasses_prompts ... ok
test commands::install::tests::gate_flake_input_errors_when_url_missing ... ok
test commands::install::tests::gate_flake_input_refuses_codex_engine ... ok
test commands::install::tests::source_prefs_cask_wins_when_both_flags_set ... ok
test commands::install::tests::source_prefs_defaults_match_no_flags ... ok
test commands::install::tests::source_prefs_maps_cask_flag ... ok
test commands::install::tests::source_prefs_maps_source_and_bleeding_edge ... ok
test commands::query::tests::collect_info_flakehub_limits_results_to_three ... ok
test commands::query::tests::collect_info_flakehub_skips_lookup_when_disabled ... ok
test commands::install::tests::service_setup_skips_when_flag_disabled ... ok
test commands::install::tests::prepare_install_phase_stops_when_flake_input_engine_is_unsupported ... ok
test commands::install::tests::service_setup_calls_editor_with_services_target ... ok
test commands::install::tests::gate_flake_input_dry_run_reports_intent_and_allows ... ok
test commands::install::tests::service_setup_dry_run_reports_without_edit_call ... ok
test commands::query::tests::info_source_label_uses_nix_attr_display ... ok
test commands::query::tests::info_status_text_matches_python_shape ... ok
test commands::query::tests::info_source_json_serializes_required_metadata ... ok
test commands::remove::tests::deterministic_remove_returns_none_for_unsupported_file ... ok
test commands::remove::tests::deterministic_remove_handles_mas_apps ... ok
test commands::remove::tests::deterministic_remove_handles_homebrew_manifest ... ok
test commands::install::tests::gate_flake_input_allows_claude_with_yes ... ok
test commands::query::tests::collect_info_sources_uses_cache_before_search ... ok
test commands::query::tests::collect_info_sources_searches_on_cache_miss ... ok
test commands::install::tests::find_existing_for_candidates_checks_alternates ... ok
test commands::remove::tests::remove_line_last_line ... ok
test commands::remove::tests::remove_line_out_of_range_errors ... ok
test commands::query::tests::collect_info_sources_falls_back_to_search_and_updates_cache ... ok
test commands::remove::tests::remove_line_first_line ... ok
test commands::remove::tests::remove_line_zero_errors ... ok
test commands::remove::tests::remove_line_removes_target_line ... ok
test commands::install::tests::start_install_resolution_completes_when_package_already_installed ... ok
test commands::remove::tests::remove_line_preserves_no_trailing_newline ... ok
test commands::shared::tests::relative_location_keeps_absolute_path_when_outside_repo ... ok
test commands::shared::tests::relative_location_strips_repo_prefix_and_keeps_line_suffix ... ok
test commands::system::tests::brew_compare_url_non_github_returns_none ... ok
test commands::system::tests::brew_compare_url_for_github_homepage ... ok
test commands::system::tests::brew_info_parse_extracts_cask_metadata ... ok
test commands::system::tests::brew_info_parse_extracts_formula_metadata ... ok
test commands::system::tests::brew_info_parse_invalid_json_returns_empty ... ok
test commands::system::tests::brew_parse_empty_arrays_returns_empty ... ok
test commands::system::tests::brew_parse_empty_json_returns_empty ... ok
test commands::secret::tests::secret_add_workflow_existing_key_is_idempotent ... ok
test commands::system::tests::brew_parse_extracts_casks ... ok
test commands::secret::tests::secret_add_workflow_adds_new_key_and_updates_secret_names ... ok
test commands::system::tests::brew_parse_extracts_formulae ... ok
test commands::system::tests::brew_parse_invalid_json_returns_empty ... ok
test commands::secret::tests::secret_add_workflow_fails_when_secrets_nix_update_is_unsafe ... ok
test commands::system::tests::brew_parse_mixed_formulae_and_casks_sorted ... ok
test commands::system::tests::brew_parse_skips_incomplete_entries ... ok
test commands::system::tests::build_command_with_ulimit ... ok
test commands::system::tests::build_command_without_ulimit ... ok
test commands::system::tests::cache_corruption_detected ... ok
test commands::system::tests::cache_corruption_not_detected_for_other_errors ... ok
test commands::system::tests::detailed_ai_summary_for_key_input ... ok
test commands::system::tests::flake_compare_endpoint_uses_short_revs ... ok
test commands::system::tests::fd_exhaustion_detected ... ok
test commands::system::tests::fd_exhaustion_not_detected_for_other_errors ... ok
test commands::system::tests::flake_compare_url_uses_short_revs ... ok
test commands::system::tests::github_owner_repo_extracts_standard_url ... ok
test commands::system::tests::github_owner_repo_handles_git_suffix ... ok
test commands::system::tests::has_nix_extension_accepts_lowercase_nix_files ... ok
test commands::system::tests::has_nix_extension_rejects_non_nix_or_uppercase_extensions ... ok
test commands::system::tests::maybe_ai_summary_respects_no_ai_gate ... ok
test commands::system::tests::maybe_ai_summary_runs_when_enabled ... ok
test commands::install::tests::execute_edit_claude_fallback_failure_returns_false ... ok
test commands::system::tests::parse_ai_summary_output_compacts_and_truncates ... ok
test commands::system::tests::parse_compare_json_extracts_commit_summary ... ok
test commands::system::tests::parse_compare_json_invalid_returns_none ... ok
test commands::system::tests::rebuild_command_includes_base_args ... ok
test commands::system::tests::rebuild_command_includes_passthrough_args ... ok
test commands::secret::tests::secret_add_workflow_returns_error_when_sops_command_missing ... ok
test commands::install::tests::execute_edit_claude_is_idempotent_without_ai_fallback ... ok
test commands::install::tests::execute_edit_claude_uses_deterministic_path ... ok
test domain::config::tests::fallback_when_no_tags_match ... ok
test domain::config::tests::default_nix_and_common_nix_excluded ... ok
test commands::install::tests::execute_edit_codex_uses_deterministic_path ... ok
test domain::config::tests::ambiguous_taps_keyword_matches_use_deterministic_winner ... ok
test commands::remove::tests::git_diff_returns_empty_for_non_repo ... ok
test domain::location::tests::parse_missing_line_keeps_whole_path ... ok
test domain::location::tests::parse_non_numeric_suffix_is_not_line ... ok
test domain::location::tests::parse_supports_colons_in_paths ... ok
test domain::config::tests::keyword_match_is_case_insensitive ... ok
test domain::config::tests::read_nx_comment_returns_none_without_tag ... ok
test domain::config::tests::read_nx_comment_extracts_purpose ... ok
test domain::plan::tests::mcp_not_detected_for_regular_packages ... ok
test domain::plan::tests::mcp_prefix_detected ... ok
test domain::plan::tests::mcp_suffix_detected ... ok
test domain::config::tests::discover_finds_tagged_files ... ok
test domain::config::tests::keyword_matching_resolves_correct_file ... ok
test commands::install::tests::execute_edit_claude_falls_back_to_ai_when_deterministic_unsupported ... ok
test domain::plan::tests::candidates_include_cli_siblings_and_exclude_languages ... ok
test domain::plan::tests::route_cask_to_casks_file ... ok
test domain::plan::tests::route_brew_to_brews_file ... ok
test domain::plan::tests::package_token_prefers_attr ... ok
test domain::plan::tests::package_token_falls_back_to_name ... ok
test domain::plan::tests::route_general_nix_to_cli_with_warning ... ok
test domain::plan::tests::route_lua_package_to_languages ... ok
test domain::plan::tests::route_mas_to_darwin ... ok
test domain::source::tests::clean_attr_path_nested ... ok
test domain::source::tests::clean_attr_path_with_prefix ... ok
test domain::source::tests::clean_attr_path_without_prefix ... ok
test domain::source::tests::dedup_handles_none_attr ... ok
test domain::source::tests::dedup_keeps_different_sources ... ok
test domain::source::tests::dedup_preserves_first ... ok
test domain::source::tests::detect_lua_package ... ok
test domain::source::tests::detect_not_language_package ... ok
test domain::source::tests::detect_python_package ... ok
test domain::source::tests::detect_versioned_python ... ok
test domain::source::tests::explicit_source_target_defaults_to_any ... ok
test domain::source::tests::explicit_source_target_preserves_cask_precedence ... ok
test domain::source::tests::normalize_aliases ... ok
test domain::source::tests::normalize_is_case_insensitive ... ok
test domain::source::tests::normalize_passthrough ... ok
test domain::plan::tests::safety_flake_input_missing_attr_errors ... ok
test domain::source::tests::package_source_parse_accepts_aliases_and_case_insensitive ... ok
test domain::source::tests::package_source_parse_rejects_unknown ... ok
test domain::source::tests::parse_dict_format ... ok
test domain::source::tests::parse_dict_uses_key_as_attr_path ... ok
test domain::source::tests::parse_empty_input ... ok
test domain::source::tests::platforms_empty_permissive ... ok
test domain::source::tests::platforms_excludes_current ... ok
test domain::source::tests::platforms_includes_current ... ok
test domain::source::tests::platforms_non_list_permissive ... ok
test domain::source::tests::score_match_exact_bare ... ok
test domain::source::tests::score_match_exact_root ... ok
test domain::source::tests::score_match_nested_penalty ... ok
test domain::plan::tests::route_python_package_to_languages ... ok
test domain::source::tests::score_match_separator_normalization ... ok
test domain::source::tests::score_match_substring ... ok
test domain::source::tests::sort_bleeding_edge_swaps_nur_nxs ... ok
test domain::source::tests::sort_normal_priority ... ok
test domain::source::tests::variants_dedup ... ok
test domain::source::tests::variants_includes_mapped ... ok
test domain::source::tests::variants_max_three ... ok
test domain::plan::tests::route_mcp_tool_to_cli_no_warning ... ok
test domain::plan::tests::route_mcp_prefix_to_cli_no_warning ... ok
test domain::plan::tests::safety_nur_missing_attr_errors ... ok
test domain::upgrade::tests::diff_detects_removed_inputs ... ok
test domain::upgrade::tests::diff_identical_locks_empty ... ok
test domain::plan::tests::safety_nxs_missing_attr_errors ... ok
test domain::upgrade::tests::diff_unchanged_inputs_not_in_changed ... ok
test domain::upgrade::tests::diff_detects_added_inputs ... ok
test domain::upgrade::tests::parse_missing_lock_returns_empty ... ok
test domain::upgrade::tests::short_rev_short_input_unchanged ... ok
test domain::upgrade::tests::diff_detects_changed_inputs ... ok
test domain::upgrade::tests::short_rev_truncates_to_seven ... ok
test infra::ai_engine::tests::claude_engine_custom_model ... ok
test infra::ai_engine::tests::claude_supports_flake_input ... ok
test infra::ai_engine::tests::codex_does_not_support_flake_input ... ok
test infra::ai_engine::tests::codex_engine_custom_model ... ok
test infra::ai_engine::tests::codex_engine_uses_default_model ... ok
test infra::ai_engine::tests::edit_callback_path_falls_back_to_engine ... ok
test infra::ai_engine::tests::edit_callback_path_uses_deterministic_outcome ... ok
test infra::ai_engine::tests::edit_prompt_brew_package ... ok
test infra::ai_engine::tests::edit_prompt_cask_package ... ok
test infra::ai_engine::tests::edit_prompt_general_nix ... ok
test infra::ai_engine::tests::edit_prompt_language_package ... ok
test infra::ai_engine::tests::edit_prompt_mas_package ... ok
test infra::ai_engine::tests::extract_tokens_handles_backtick_wrapping ... ok
test infra::ai_engine::tests::extract_tokens_from_typical_output ... ok
test domain::upgrade::tests::parse_extracts_flakehub_tarball ... ok
test domain::upgrade::tests::parse_handles_indirection ... ok
test infra::ai_engine::tests::extract_tokens_multiple ... ok
test infra::ai_engine::tests::match_candidate_basename_ambiguous ... ok
test infra::ai_engine::tests::match_candidate_basename_unique ... ok
test infra::ai_engine::tests::match_candidate_exact ... ok
test infra::ai_engine::tests::extract_tokens_no_nix_files ... ok
test infra::ai_engine::tests::match_candidate_no_match ... ok
test domain::upgrade::tests::parse_skips_file_type ... ok
test infra::ai_engine::tests::match_candidate_suffix ... ok
test infra::ai_engine::tests::normalize_strips_backticks_and_quotes ... ok
test domain::upgrade::tests::parse_extracts_github_inputs ... ok
test infra::ai_engine::tests::normalize_strips_trailing_punctuation ... ok
test infra::ai_engine::tests::remove_prompt_instructs_edit_only ... ok
test infra::ai_engine::tests::remove_prompt_contains_package_and_path ... ok
test infra::ai_engine::tests::resolve_ambiguous_falls_back ... ok
test infra::ai_engine::tests::resolve_no_match_falls_back ... ok
test infra::ai_engine::tests::resolve_single_match ... ok
test domain::upgrade::tests::parse_skips_follows_refs ... ok
test infra::ai_engine::tests::routing_prompt_with_candidates ... ok
test infra::ai_engine::tests::routing_prompt_without_candidates ... ok
test infra::ai_engine::tests::routing_run_silent_fallback_when_command_unavailable ... ok
test infra::ai_engine::tests::routing_run_parses_successful_output ... ok
test infra::ai_engine::tests::select_candidates_direct_substring_fallback ... ok
test infra::ai_engine::tests::select_engine_claude ... ok
test infra::ai_engine::tests::select_engine_codex_explicit ... ok
test infra::ai_engine::tests::select_candidates_deduplicates ... ok
test infra::ai_engine::tests::select_engine_default_is_codex ... ok
test infra::ai_engine::tests::select_engine_unknown_defaults_to_codex ... ok
test infra::ai_engine::tests::select_single_candidate ... ok
test infra::cache::tests::missing_flake_lock_uses_unknown ... ok
test infra::cache::tests::cache_persists_to_disk ... ok
test infra::cache::tests::cask_shares_homebrew_revision ... ok
test infra::cache::tests::homebrew_only_is_ignored ... ok
test infra::cache::tests::schema_mismatch_invalidates ... ok
test infra::cache::tests::normalizes_alias_keys ... ok
test infra::ai_engine::tests::routing_context_contains_file_structure ... ok
test infra::ai_engine::tests::routing_context_contains_routing_rules ... ok
test infra::cache::tests::revision_keying ... ok
test infra::ai_engine::tests::routing_context_contains_language_guidance ... ok
test infra::cache::tests::nxs_present_returns_results ... ok
test infra::file_edit::tests::apply_edit_missing_file_errors ... ok
test infra::config_scan::tests::scan_packages_excludes_launchd_service_from_common_nix ... ok
test infra::file_edit::tests::apply_removal_errors_for_language_mode_without_language_info ... ok
test infra::file_edit::tests::apply_edit_errors_for_language_mode_without_language_info ... ok
test infra::file_edit::tests::apply_edit_writes_file ... ok
test infra::file_edit::tests::homebrew_alphabetical_insertion ... ok
test infra::file_edit::tests::homebrew_first_in_list ... ok
test infra::file_edit::tests::homebrew_idempotent ... ok
test infra::file_edit::tests::homebrew_insert_then_remove_roundtrip ... ok
test infra::file_edit::tests::homebrew_preserves_comments ... ok
test infra::file_edit::tests::homebrew_remove_not_found ... ok
test infra::file_edit::tests::homebrew_remove_preserves_comments ... ok
test infra::file_edit::tests::homebrew_removes_entry ... ok
test infra::file_edit::tests::language_package_correct_runtime_targeting ... ok
test infra::file_edit::tests::language_package_idempotent ... ok
test infra::file_edit::tests::language_package_into_python_block ... ok
test infra::file_edit::tests::language_package_missing_runtime_errors ... ok
test infra::file_edit::tests::language_package_remove_correct_runtime ... ok
test infra::file_edit::tests::language_package_remove_missing_runtime_errors ... ok
test infra::file_edit::tests::language_package_remove_not_found ... ok
test infra::file_edit::tests::language_package_removes_from_python_block ... ok
test infra::file_edit::tests::apply_removal_idempotent_no_write ... ok
test infra::cache::tests::set_many_skips_result_without_attr ... ok
test infra::file_edit::tests::mas_app_alphabetical_insertion ... ok
test infra::file_edit::tests::mas_app_idempotent ... ok
test infra::file_edit::tests::mas_app_inserts_into_empty_block ... ok
test infra::file_edit::tests::mas_app_missing_block_falls_back_to_top_level ... ok
test infra::cache::tests::set_many_surfaces_write_error ... ok
test infra::file_edit::tests::apply_removal_writes_file ... ok
test infra::file_edit::tests::mas_app_missing_block_inserts_into_homebrew_attrset ... ok
test infra::file_edit::tests::mas_app_remove_missing_block_is_idempotent ... ok
test infra::cache::tests::set_many_keeps_highest_confidence ... ok
test infra::file_edit::tests::mas_app_remove_not_found ... ok
test infra::file_edit::tests::nix_manifest_alphabetical_insertion ... ok
test infra::file_edit::tests::nix_manifest_detects_indent ... ok
test infra::file_edit::tests::nix_manifest_idempotent ... ok
test infra::file_edit::tests::nix_manifest_first_in_list ... ok
test infra::file_edit::tests::nix_manifest_insert_then_remove_roundtrip ... ok
test infra::file_edit::tests::mas_app_removes_entry ... ok
test infra::file_edit::tests::nix_manifest_last_in_list ... ok
test infra::file_edit::tests::nix_manifest_preserves_comments ... ok
test infra::file_edit::tests::nix_manifest_remove_not_found ... ok
test infra::file_edit::tests::nix_manifest_remove_preserves_comments ... ok
test infra::file_edit::tests::nix_manifest_remove_preserves_section_headers ... ok
test infra::file_edit::tests::nix_manifest_removes_first_entry ... ok
test infra::file_edit::tests::nix_manifest_removes_last_entry ... ok
test infra::file_edit::tests::nix_manifest_removes_middle_entry ... ok
test infra::file_edit::tests::nix_manifest_skips_section_headers ... ok
test infra::config_scan::tests::scan_packages_includes_launchd_service_from_default_nix ... ok
test infra::finder::tests::find_package_fuzzy_prefers_exact_match ... ok
test infra::flake_input::tests::add_flake_input_errors_when_file_missing ... ok
test infra::finder::tests::find_package_fuzzy_returns_matched_name_and_location ... ok
test infra::flake_input::tests::add_flake_input_errors_without_inputs_block ... ok
test infra::flake_input::tests::add_flake_input_inserts_line_into_inputs_block ... ok
test infra::flake_input::tests::derive_name_from_flakehub_url ... ok
test infra::flake_input::tests::derive_name_from_github_style_url ... ok
test infra::flake_input::tests::format_attr_quotes_invalid_identifier ... ok
test infra::flake_input::tests::add_flake_input_is_idempotent_when_present ... ok
test infra::query_info::tests::config_option_returns_none_for_unknown_package ... ok
test infra::query_info::tests::search_flakehub_with_accepts_object_payload ... ok
test infra::finder::tests::find_package_matches_qualified_suffix ... ok
test infra::query_info::tests::search_flakehub_with_returns_empty_when_fetch_fails ... ok
test infra::query_info::tests::url_encode_component_encodes_reserved_characters ... ok
test infra::query_info::tests::search_flakehub_with_filters_and_limits ... ok
test infra::query_info::tests::darwin_service_info_reports_enabled ... ok
test infra::shell::tests::join_reader_surfaces_stream_read_error ... ok
test infra::query_info::tests::hm_module_info_reports_enabled ... ok
test infra::finder::tests::find_package_fuzzy_prefers_prefix_before_substring ... ok
test infra::self_refresh::tests::latest_source_modified_reads_src_and_manifest_files ... ok
test infra::shell::tests::run_indented_command_surfaces_spawn_failure ... ok
test infra::shell::tests::join_reader_surfaces_thread_panic ... ok
test infra::shell::tests::run_json_command_quiet_parses_valid_json ... ok
test infra::shell::tests::run_json_command_quiet_returns_none_on_spawn_failure ... ok
test infra::sources::tests::explicit_cask_shortcut ... ok
test infra::finder::tests::finder_index_rebuilds_only_when_signatures_change ... ok
test infra::sources::tests::command_available_finds_cat ... ok
test infra::sources::tests::explicit_mas_shortcut ... ok
test infra::sources::tests::explicit_source_none_for_default_prefs ... ok
test infra::sources::tests::flake_inputs_missing_lock_returns_empty ... ok
test infra::sources::tests::flake_inputs_empty_for_unknown_package ... ok
test infra::sources::tests::flake_inputs_finds_overlay_package ... ok
test infra::sources::tests::forced_source_none_when_not_set ... ok
test infra::sources::tests::flake_inputs_neovim_overlay ... ok
test infra::sources::tests::forced_source_unknown_returns_none ... ok
test infra::sources::tests::parallel_search_source_failure_keeps_other_results_and_warns ... ok
test infra::sources::tests::parallel_search_source_failure_quiet_suppresses_warning ... ok
test infra::finder::tests::find_package_uses_shared_alias_normalization ... ok
test infra::sources::tests::command_available_missing_program ... ok
test output::json::tests::compact_matches_python_separators ... ok
test output::json::tests::compact_nested_objects ... ok
test infra::shell::tests::run_json_command_quiet_returns_none_on_invalid_json ... ok
test output::printer::tests::confirm_response_empty_uses_default ... ok
test output::printer::tests::confirm_response_accepts_y_and_yes ... ok
test output::printer::tests::confirm_response_rejects_n_and_no ... ok
test output::printer::tests::printer_uses_minimal_glyphs_for_plain_mode ... ok
test output::printer::tests::printer_uses_unicode_glyphs_when_requested ... ok
test output::printer::tests::success_line_has_no_ansi_when_color_disabled ... ok
test output::printer::tests::success_line_uses_ansi_when_color_enabled ... ok
test output::printer::tests::warning_glyph_is_bang_for_both_icon_sets ... ok
test output::printer::tests::wrapped_segments_preserves_long_word_chunks ... ok
test output::style::tests::color_policy_disables_when_no_color_is_set ... ok
test output::style::tests::color_policy_disables_when_plain_mode_is_enabled ... ok
test output::style::tests::color_policy_disables_when_term_is_dumb ... ok
test output::style::tests::color_policy_requires_terminal_stdout ... ok
test output::style::tests::default_is_minimal ... ok
test output::style::tests::minimal_wins_over_unicode ... ok
test output::style::tests::plain_uses_minimal_set ... ok
test output::style::tests::unicode_selected_when_requested ... ok
test infra::self_refresh::tests::is_binary_stale_when_source_is_newer ... ok
test commands::system::tests::diff_stat_returns_none_for_clean_file ... ok
test commands::system::tests::modified_files_empty_on_clean_tree ... ok
test commands::system::tests::diff_stat_returns_summary_for_modified_file ... ok
test commands::system::tests::modified_files_ignores_untracked ... ok
test commands::system::tests::modified_files_detects_unstaged_changes ... ok
test infra::sources::tests::parallel_search_timeout_quiet_suppresses_warning ... ok
test infra::sources::tests::parallel_search_timeout_returns_partial_results_and_warns ... ok
test commands::system::tests::modified_files_ignores_staged_only ... ok
test commands::secret::tests::run_sops_set_failure_redacts_secret_value_from_error ... ok
test infra::sources::tests::forced_source_brew_alias_is_parsed ... ok
test infra::sources::tests::forced_source_unstable_is_case_insensitive ... ok

test result: ok. 368 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 2.38s

     Running unittests src/main.rs (target/debug/deps/nx-e92aadad64b033d9)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/parity_harness.rs (target/debug/deps/parity_harness-cfc27fc9298f62ca)

running 7 tests
test normalize_confirm_prompt_newline_collapses_multiline_success ... ok
test normalize_confirm_prompt_newline_handles_space_before_linebreak ... ok
test normalize_rebuild_ulimit_wrapper_leaves_other_commands_unchanged ... ok
test normalize_unittest_timing_leaves_other_lines_unchanged ... ok
test normalize_unittest_timing_stabilizes_elapsed_seconds ... ok
test normalize_rebuild_ulimit_wrapper_collapses_to_direct_stub_command ... ok
test parity_harness ... ok

test result: ok. 7 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 33.12s

     Running tests/support.rs (target/debug/deps/support-336a5300163a977a)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/system_command_matrix.rs (target/debug/deps/system_command_matrix-318975bb48efe407)

running 1 test
test system_command_matrix ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 8.89s

    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.02s
