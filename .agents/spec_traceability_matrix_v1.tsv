clause_id	clause_title	spec_heading_line	implementation_refs	unit_test_refs	system_test_refs	parity_case_ids	coverage_status	gap_notes
2	CLI Surface Contract	25	src/lib.rs::run_from;src/cli.rs::Cli;src/cli.rs::CommandKind;src/app.rs::execute	-	tests/system_command_matrix.rs::MATRIX_CASES	tests/fixtures/parity/cases.json	covered_by_subclauses	Use subclauses for executable evidence.
2.1	Invocation	27	src/lib.rs::run_from;src/cli.rs::KNOWN_COMMANDS;src/cli.rs::preprocess_args	src/cli.rs::tests::preprocess_args_typo_like_token_inserts_install;src/cli.rs::tests::preprocess_args_package_name_inserts_install;src/cli.rs::tests::preprocess_args_known_command_passes_through;src/cli.rs::tests::preprocess_args_search_command_passes_through;src/cli.rs::tests::preprocess_args_uninstall_alias_passes_through;src/cli.rs::tests::known_commands_match_spec_plus_intentional_extensions	tests/system_command_matrix.rs::MATRIX_CASES[install_missing_args_parser_error,remove_missing_args_parser_error,where_missing_args_parser_error,info_missing_args_parser_error,installed_missing_args_parser_error]	implicit_install_unqualified_token_stubbed;install_missing_arg;remove_missing_arg;where_missing_arg;info_missing_arg;installed_missing_arg;search_found_stubbed;search_json_found_stubbed	covered	Extension set is intentionally additive (`search`,`secret`/`secrets`,`uninstall`) and documented in SPEC ยง14; parser tests lock passthrough and boundaries.
2.2	Global Options	51	src/cli.rs::Cli::{plain,unicode,minimal,verbose,json};src/app.rs::execute;src/commands/context.rs::GlobalFlags;src/commands/query.rs::{cmd_list,cmd_info,cmd_installed};src/commands/search.rs::cmd_search;src/output/style.rs::OutputStyle::from_flags	src/cli.rs::tests::global_json_and_unicode_flags_parse_at_root;src/output/style.rs::tests::unicode_selected_when_requested;src/output/style.rs::tests::plain_uses_minimal_set;src/output/printer.rs::tests::printer_uses_minimal_glyphs_for_plain_mode	tests/system_command_matrix.rs::MATRIX_CASES[list_global_json_flag_renders_json,info_global_json_flag_renders_json,installed_global_json_flag_renders_json]	list_json;info_json_found;installed_json_success	covered	Root-level `--json` now propagates to JSON-capable handlers; unicode flag parsing and style selection are directly unit-tested.
2.3	Command Options	61	src/cli.rs::InstallArgs;src/cli.rs::RemoveArgs;src/cli.rs::ListArgs;src/cli.rs::InfoArgs;src/cli.rs::InstalledArgs;src/cli.rs::UpgradeArgs	src/cli.rs::tests::install_parses_explain_engine_and_model_options;src/cli.rs::tests::remove_parses_model_option;src/cli.rs::tests::list_parses_verbose_option;src/cli.rs::tests::info_parses_verbose_option;src/cli.rs::tests::upgrade_parses_verbose_option;src/commands/install.rs::tests::source_prefs_maps_source_and_bleeding_edge;src/commands/install.rs::tests::source_prefs_maps_cask_flag	tests/system_command_matrix.rs::MATRIX_CASES[update_success_passthrough,rebuild_success_passthrough,upgrade_passthrough_flake_update_args,upgrade_dry_run_skip_brew_short_circuit]	list_json;list_invalid_source;installed_show_location;info_bleeding_edge_stubbed;upgrade_flake_passthrough_stubbed	covered	Explicit parser coverage now locks the remaining option-surface clauses (`--explain`, engine/model, verbose toggles).
2.4	Exit Code Contract	94	src/commands/install.rs::cmd_install;src/commands/remove.rs::cmd_remove;src/commands/query.rs::{cmd_where,cmd_list,cmd_info,cmd_status,cmd_installed};src/commands/system.rs::{cmd_undo,cmd_update,cmd_test,cmd_rebuild,cmd_upgrade};src/commands/shared.rs::missing_argument_error	-	tests/system_command_matrix.rs::MATRIX_CASES[*_parser_error,update_failure_exit,test_*_failure_*,rebuild_*_failure_*,upgrade_*_short_circuit]	install_missing_arg;remove_missing_arg;where_missing_arg;list_invalid_source;info_missing_arg;installed_missing_arg;update_failure;test_failure;rebuild_flake_check_failure;upgrade_flake_failure	covered	Exit-code behavior is locked primarily by parity + system matrix.
3	Repository Discovery And Config Routing	109	src/app.rs::find_repo_root;src/domain/config.rs::ConfigFiles::discover	-	-	-	covered_by_subclauses	Use 3.1/3.2 rows for evidence.
3.1	Repo Root Resolution	111	src/app.rs::{find_repo_root,git_repo_root,resolve_repo_root,dirs_home}	src/app.rs::tests::resolve_repo_root_prefers_env_var;src/app.rs::tests::resolve_repo_root_prefers_git_root_over_home_default;src/app.rs::tests::resolve_repo_root_falls_back_to_home_default;src/app.rs::tests::resolve_repo_root_errors_without_any_source	-	(where execution in all parity cases runs with B2NIX_REPO_ROOT)	covered	Unit tests lock ordering/env/git/home/error branches.
3.2	Config File Discovery	120	src/domain/config.rs::ConfigFiles::discover;src/domain/config.rs::{packages,languages,services,darwin,homebrew_brews,homebrew_casks,homebrew_taps};src/infra/config_scan.rs::collect_nix_files	src/domain/config.rs::tests::default_nix_and_common_nix_excluded;src/domain/config.rs::tests::fallback_when_no_tags_match;src/infra/config_scan.rs::tests::scan_packages_includes_launchd_service_from_default_nix;src/infra/config_scan.rs::tests::scan_packages_excludes_launchd_service_from_common_nix	tests/system_command_matrix.rs::MATRIX_CASES[info_json_hm_module_known_package,info_json_darwin_service_known_package]	list_plain_default_launchd_service;status_plain_default_launchd_service	covered	Config routing and scan behavior align with SPEC note about `default.nix` handling split.
4	Finder Contract	140	src/infra/finder.rs::*;src/infra/config_scan.rs::scan_packages	-	-	-	covered_by_subclauses	Use 4.1-4.4 rows for evidence.
4.1	find_package(name)	142	src/infra/finder.rs::{find_package,find_package_exact,build_patterns,is_alias_rhs_for};src/domain/source.rs::normalize_name	src/infra/finder.rs::tests::find_package_matches_qualified_suffix;src/infra/finder.rs::tests::find_package_uses_shared_alias_normalization	-	where_found;where_not_found;remove_yes_mutates;install_dry_run_installed	covered	Lookup, aliasing, and alias-RHS false-positive avoidance are implemented and tested.
4.2	find_all_packages()	149	src/infra/config_scan.rs::{scan_packages,collect_nixpkgs_packages,collect_homebrew_items,collect_mas_apps,collect_launchd_services}	src/infra/config_scan.rs::tests::scan_packages_includes_launchd_service_from_default_nix;src/infra/config_scan.rs::tests::scan_packages_excludes_launchd_service_from_common_nix	-	list_plain;list_json;status_plain;list_plain_default_launchd_service;status_plain_default_launchd_service	covered	Source bucket extraction is exercised via command parity and config-scan unit tests.
4.3	Finder Index Performance Contract	167	src/infra/finder.rs::{finder_index,finder_index_rebuilds,collect_file_snapshots,file_signature,find_package}	src/infra/finder.rs::tests::finder_index_rebuilds_only_when_signatures_change	-	-	covered	Finder now caches an in-memory index per repo root, validates with `(mtime_ns,size)` signatures, and exposes a per-repo rebuild metric locked by unit test.
4.4	Fuzzy Lookup	174	src/infra/finder.rs::{find_package_fuzzy,find_fuzzy_match}	src/infra/finder.rs::tests::find_package_fuzzy_prefers_exact_match;src/infra/finder.rs::tests::find_package_fuzzy_prefers_prefix_before_substring;src/infra/finder.rs::tests::find_package_fuzzy_returns_matched_name_and_location	-	installed_single_found;installed_multi_mixed;installed_json_success	covered	Direct unit tests now lock exact/prefix/substring precedence and `(matched_name,location)` output shape.
5	Cache Contract (MultiSourceCache)	184	src/infra/cache.rs::MultiSourceCache;src/infra/cache.rs::{load_revisions,load_entries,source_to_input}	src/infra/cache.rs::tests::revision_keying;src/infra/cache.rs::tests::homebrew_only_is_ignored;src/infra/cache.rs::tests::normalizes_alias_keys;src/infra/cache.rs::tests::schema_mismatch_invalidates;src/infra/cache.rs::tests::set_many_keeps_highest_confidence	-	install_cache_hit_stubbed;info_json_found	covered	Schema envelope, revision-aware keys, alias normalization, source order, and guardrail have unit coverage.
6	Source Search Contract	197	src/infra/sources.rs::*;src/domain/source.rs::*	-	-	-	covered_by_subclauses	Use 6.1-6.4 rows for evidence.
6.1	Search Inputs	199	src/domain/source.rs::SourcePreferences;src/commands/install.rs::source_prefs_from_args	src/commands/install.rs::tests::source_prefs_defaults_match_no_flags;src/commands/install.rs::tests::source_prefs_maps_cask_flag;src/commands/install.rs::tests::source_prefs_maps_source_and_bleeding_edge	-	install_source_selection_multi_stubbed;install_dry_run_found_stubbed	covered	Input preference plumbing is directly unit-tested and exercised by install/search parity.
6.2	Search Shortcuts	209	src/infra/sources.rs::{search_all_sources_with_timeout_reporting,search_forced_source,search_explicit_source,search_language_override,parallel_search,deduplicate_results,sort_results};src/domain/source.rs::detect_language_package	src/infra/sources.rs::tests::forced_source_none_when_not_set;src/infra/sources.rs::tests::explicit_cask_shortcut;src/infra/sources.rs::tests::explicit_mas_shortcut;src/domain/source.rs::tests::detect_versioned_python	-	search_found_stubbed;search_json_found_stubbed;search_bleeding_edge_stubbed;install_source_selection_multi_stubbed	covered	Ordered shortcut behavior, sort, and dedupe are implemented and covered.
6.3	Parallel Search Failure/Timeout	223	src/infra/sources.rs::{parallel_search,parallel_search_with,search_all_sources,search_all_sources_quiet}	src/infra/sources.rs::tests::parallel_search_timeout_returns_partial_results_and_warns;src/infra/sources.rs::tests::parallel_search_timeout_quiet_suppresses_warning;src/infra/sources.rs::tests::parallel_search_source_failure_keeps_other_results_and_warns;src/infra/sources.rs::tests::parallel_search_source_failure_quiet_suppresses_warning	-	search_found_stubbed;install_dry_run_found_stubbed	covered	Timeout and failure semantics (partial results, warn vs quiet) are locked with deterministic unit tests.
6.4	Platform Availability Check	229	src/infra/sources.rs::check_nix_available;src/domain/source.rs::check_platforms;src/commands/install.rs::resolve_platform_candidate_with	src/domain/source.rs::tests::platforms_excludes_current;src/domain/source.rs::tests::platforms_non_list_permissive;src/commands/install.rs::tests::platform_resolution_uses_same_source_fallback_when_primary_unavailable;src/commands/install.rs::tests::platform_resolution_errors_without_same_source_fallback	-	install_platform_incompatible_stubbed	covered	Availability and same-source fallback behavior are enforced.
7	Install Flow Contract	238	src/commands/install.rs::*;src/domain/plan.rs::*;src/infra/file_edit.rs::*	-	-	-	covered_by_subclauses	Use 7.1-7.8 rows for evidence.
7.1	Search Resolution	240	src/commands/install.rs::{install_one,search_for_package,resolve_search_candidates,find_existing_for_candidates,find_existing_for_result,lookup_names};src/infra/cache.rs::MultiSourceCache	src/commands/install.rs::tests::lookup_names_includes_attr_and_language_bare_name;src/commands/install.rs::tests::find_existing_for_candidates_checks_alternates	-	install_dry_run_installed;install_cache_hit_stubbed;install_dry_run_found_stubbed;install_platform_incompatible_stubbed	covered	Installed short-circuit, cache path, source query, and alternate-installed detection are covered.
7.2	User Confirmation	249	src/commands/install.rs::{show_resolution_groups,select_candidate_index,prompt_source_choice,parse_source_choice}	src/commands/install.rs::tests::parse_source_choice_empty_defaults_to_first;src/commands/install.rs::tests::parse_source_choice_accepts_valid_number;src/commands/install.rs::tests::select_candidate_index_single_requires_confirmation;src/commands/install.rs::tests::select_candidate_index_multi_uses_numbered_prompt	-	install_source_selection_multi_stubbed	covered	Prompt defaulting, numbered selection, and `--yes`/`--dry-run` bypass are tested.
7.3	InstallPlan Contract	261	src/domain/plan.rs::{InstallPlan,InsertionMode,build_install_plan,install_name};src/domain/source.rs::detect_language_package	src/domain/plan.rs::tests::route_cask_to_casks_file;src/domain/plan.rs::tests::route_python_package_to_languages;src/domain/plan.rs::tests::safety_nxs_missing_attr_errors;src/domain/plan.rs::tests::package_token_prefers_attr	-	install_dry_run_found_stubbed;install_platform_incompatible_stubbed	covered	Type-level install planning and hard safety guards are covered.
7.4	Routing Safety Invariants	289	src/domain/plan.rs::{nix_manifest_candidates,is_mcp_tool,build_install_plan};src/commands/install.rs::refine_routing	src/domain/plan.rs::tests::route_mcp_tool_to_cli_no_warning;src/domain/plan.rs::tests::route_general_nix_to_cli_with_warning;src/domain/plan.rs::tests::candidates_include_cli_siblings_and_exclude_languages	-	install_dry_run_found_stubbed	covered	Candidate set is now constrained to fallback-manifest siblings and excludes `languages.nix` for general-nix AI routing.
7.5	Flake Input Modification Gate	298	src/commands/install.rs::gate_flake_input;src/infra/flake_input.rs::add_flake_input	src/commands/install.rs::tests::gate_flake_input_refuses_codex_engine;src/commands/install.rs::tests::gate_flake_input_allows_claude_with_yes;src/commands/install.rs::tests::gate_flake_input_dry_run_reports_intent_and_allows;src/infra/flake_input.rs::tests::add_flake_input_is_idempotent_when_present	-	install_flake_input_claude_yes_stubbed	covered	Rust parity fixture now exercises full flake-mod-required install mutation flow (`--engine=claude --yes`) end-to-end.
7.6	Platform-Incompatible Primary Result Fallback	306	src/commands/install.rs::{resolve_platform_candidate,resolve_platform_candidate_with};src/infra/sources.rs::check_nix_available	src/commands/install.rs::tests::platform_resolution_uses_primary_when_available;src/commands/install.rs::tests::platform_resolution_uses_same_source_fallback_when_primary_unavailable;src/commands/install.rs::tests::platform_resolution_skips_unavailable_same_source_and_uses_later_fallback	-	install_platform_incompatible_stubbed	covered	Same-source fallback and terminal error behavior are unit/parity covered.
7.7	Engine Execution Semantics	314	src/commands/install.rs::{execute_edit,report_deterministic_edit,should_fallback_to_ai};src/infra/ai_engine.rs::select_engine	src/commands/install.rs::tests::execute_edit_codex_uses_deterministic_path;src/commands/install.rs::tests::execute_edit_claude_uses_deterministic_path;src/commands/install.rs::tests::execute_edit_claude_falls_back_to_ai_when_deterministic_unsupported;src/commands/install.rs::tests::execute_edit_claude_fallback_failure_returns_false	-	install_yes_mutates_stubbed;install_flake_input_claude_yes_stubbed	covered	Non-dry-run Rust parity fixtures now lock install execution via both codex-default and claude-selected engine pathways.
7.8	Post-Install	320	src/commands/install.rs::run_post_install_actions;src/commands/system.rs::cmd_rebuild	src/commands/install.rs::tests::post_install_runs_rebuild_when_requested;src/commands/install.rs::tests::post_install_skips_rebuild_in_dry_run;src/commands/install.rs::tests::post_install_skips_rebuild_when_nothing_installed	-	install_yes_mutates_stubbed;install_yes_rebuild_stubbed	covered	Rust parity fixtures now assert successful non-dry-run install emits `Run: nx rebuild` and `--rebuild` triggers rebuild flow.
8	Remove Flow Contract	325	src/commands/remove.rs::{cmd_remove,remove_single_package,remove_with_line,remove_via_ai,try_deterministic_remove,deterministic_remove_plans};src/infra/file_edit.rs::apply_removal	src/commands/remove.rs::tests::remove_line_removes_target_line;src/commands/remove.rs::tests::deterministic_remove_handles_homebrew_manifest;src/commands/remove.rs::tests::deterministic_remove_handles_mas_apps	tests/system_command_matrix.rs::MATRIX_CASES[remove_missing_args_parser_error]	remove_dry_run;remove_dry_run_alias;remove_dry_run_not_found;remove_yes_mutates;remove_missing_arg	covered	Alias, dry-run preview, deterministic removal, fallback path, and permissive exit behavior are parity-covered.
9	Query Commands Contract	337	src/commands/query.rs::*	-	-	-	covered_by_subclauses	Use 9.1-9.5 rows for evidence.
9.1	where	339	src/commands/query.rs::cmd_where;src/infra/finder.rs::find_package	-	-	where_found;where_not_found;where_missing_arg	covered	Success/not-found/missing-arg behavior matches SPEC.
9.2	list	345	src/commands/query.rs::{cmd_list,normalize_source_filter,render_list_json,print_plain_list};src/infra/config_scan.rs::scan_packages	-	-	list_plain;list_json;list_invalid_source;list_plain_default_launchd_service	covered	Plain/json/filter alias/error semantics are parity-covered.
9.3	info	353	src/commands/query.rs::{cmd_info,collect_info_sources,collect_info_flakehub,info_source_json_from_result,detect_installed_source};src/infra/query_info.rs::*	src/commands/query.rs::tests::collect_info_sources_uses_cache_before_search;src/commands/query.rs::tests::collect_info_sources_falls_back_to_search_and_updates_cache;src/commands/query.rs::tests::info_source_json_serializes_required_metadata;src/commands/query.rs::tests::collect_info_flakehub_skips_lookup_when_disabled	tests/system_command_matrix.rs::MATRIX_CASES[info_found_installed_plain,info_found_installed_json,info_found_bleeding_edge_plain,info_json_hm_module_known_package,info_json_darwin_service_known_package]	info_found;info_json_found;info_json_not_found;info_bleeding_edge_stubbed;info_json_sources_not_installed;info_missing_arg	covered	JSON shape + bleeding-edge FlakeHub gate are covered with unit + system + parity evidence.
9.4	status	369	src/commands/query.rs::cmd_status;src/infra/config_scan.rs::scan_packages	-	-	status_plain;status_plain_default_launchd_service	covered	Total + per-source distribution output is parity-covered.
9.5	installed	373	src/commands/query.rs::{cmd_installed,render_installed_json,render_single_installed,render_multi_installed};src/infra/finder.rs::find_package_fuzzy	-	-	installed_json_success;installed_json_failure;installed_single_found;installed_single_not_found;installed_show_location;installed_multi_all_found;installed_multi_mixed;installed_missing_arg	covered	Fuzzy resolution, JSON schema, show-location, and aggregate exit code semantics are parity-covered.
10	System Command Contracts	381	src/commands/system.rs::*	-	-	-	covered_by_subclauses	Use 10.1-10.5 rows for evidence.
10.1	undo	383	src/commands/system.rs::{cmd_undo,git_modified_files,git_diff_stat}	src/commands/system.rs::tests::modified_files_detects_unstaged_changes;src/commands/system.rs::tests::modified_files_ignores_untracked;src/commands/system.rs::tests::diff_stat_returns_summary_for_modified_file	tests/system_command_matrix.rs::MATRIX_CASES[undo_clean_noop,undo_dirty_confirmed_reverts,undo_dirty_cancelled_short_circuit]	undo_clean;undo_dirty_cancelled;undo_dirty_confirmed	covered	Prompt + revert + no-op paths are covered.
10.2	update	389	src/commands/system.rs::cmd_update;src/infra/shell.rs::run_indented_command	-	tests/system_command_matrix.rs::MATRIX_CASES[update_success_passthrough,update_failure_exit]	update_success;update_failure;update_success_passthrough	covered	Passthrough args, success, and failure exit paths are covered.
10.3	test	395	src/commands/system.rs::{cmd_test,run_test_step}	-	tests/system_command_matrix.rs::MATRIX_CASES[test_success_sequence,test_ruff_failure_short_circuit,test_mypy_failure_short_circuit,test_unittest_failure_exit]	test_success;test_failure;test_mypy_failure;test_unittest_failure	covered	Ordered step execution and short-circuit failures are covered.
10.4	rebuild	405	src/commands/system.rs::{cmd_rebuild,check_git_preflight,check_flake,do_rebuild,build_rebuild_command};src/infra/shell.rs::run_indented_command_collecting	src/commands/system.rs::tests::rebuild_command_includes_base_args;src/commands/system.rs::tests::rebuild_command_includes_passthrough_args	tests/system_command_matrix.rs::MATRIX_CASES[rebuild_success_passthrough,rebuild_git_preflight_failure_short_circuit,rebuild_untracked_nix_short_circuit,rebuild_flake_check_failure_short_circuit,rebuild_darwin_failure_exit]	rebuild_success;rebuild_success_passthrough;rebuild_preflight_untracked_nix;rebuild_flake_check_failure;rebuild_git_preflight_failure	covered	Preflight, flake-check, passthrough, and failure paths are covered.
10.5	upgrade	417	src/commands/system.rs::{cmd_upgrade,run_flake_phase,run_brew_phase,stream_nix_update,commit_flake_lock};src/domain/upgrade.rs::{load_flake_lock,diff_locks}	src/commands/system.rs::tests::parse_compare_json_extracts_commit_summary;src/commands/system.rs::tests::build_nix_update_command;src/commands/system.rs::tests::cache_corruption_detected;src/commands/system.rs::tests::brew_parse_extracts_formulae	tests/system_command_matrix.rs::MATRIX_CASES[upgrade_flake_failure_short_circuit,upgrade_flake_changed_commits_lockfile,upgrade_flake_changed_skip_commit_gate,upgrade_no_flake_changes_skips_commit,upgrade_passthrough_flake_update_args,upgrade_flake_update_injects_access_token_option,upgrade_flake_update_cache_corruption_retries_once,upgrade_brew_with_updates_runs_upgrade,upgrade_brew_with_updates_dry_run_skips_upgrade,upgrade_runs_rebuild_when_not_skipped,upgrade_rebuild_failure_exits_nonzero]	upgrade_flake_failure;upgrade_flake_changed_commits_lockfile;upgrade_flake_changed_skip_commit;upgrade_flake_unchanged_no_skip_commit;upgrade_flake_passthrough_stubbed;upgrade_brew_stubbed_no_updates;upgrade_brew_stubbed_with_updates;upgrade_brew_stubbed_with_updates_dry_run;upgrade_brew_stubbed_with_updates_skip_rebuild;upgrade_dry_run_skip_brew;upgrade_flake_stubbed	covered	All high-level upgrade phases are covered by parity + system matrix.
11	Upgrade/Changelog Contracts	439	src/commands/system.rs::{stream_nix_update,gh_auth_token,clear_fetcher_cache,is_cache_corruption};src/domain/upgrade.rs::{parse_flake_lock,diff_locks,short_rev}	src/domain/upgrade.rs::tests::parse_extracts_github_inputs;src/domain/upgrade.rs::tests::parse_extracts_flakehub_tarball;src/domain/upgrade.rs::tests::parse_skips_file_type;src/domain/upgrade.rs::tests::diff_detects_changed_inputs;src/commands/system.rs::tests::cache_corruption_detected;src/commands/system.rs::tests::flake_compare_endpoint_uses_short_revs	tests/system_command_matrix.rs::MATRIX_CASES[upgrade_flake_update_injects_access_token_option,upgrade_flake_update_cache_corruption_retries_once];tests/system_command_matrix.rs::assert_home_state	upgrade_flake_passthrough_stubbed;upgrade_flake_stubbed;upgrade_flake_failure	covered	Corruption retry path now has an explicit system assertion that `~/.cache/nix/fetcher-cache-v4.sqlite` is removed.
12	Utility Contracts	452	src/domain/location.rs::PackageLocation::parse;src/commands/shared.rs::relative_location;src/domain/source.rs::detect_language_package;src/infra/flake_input.rs::add_flake_input;src/infra/shell.rs::{run_indented_command,run_indented_command_collecting};src/output/printer.rs::stream_line	src/domain/location.rs::tests::parse_supports_colons_in_paths;src/commands/shared.rs::tests::relative_location_strips_repo_prefix_and_keeps_line_suffix;src/commands/shared.rs::tests::relative_location_keeps_absolute_path_when_outside_repo;src/domain/source.rs::tests::detect_versioned_python;src/infra/flake_input.rs::tests::add_flake_input_is_idempotent_when_present;src/infra/shell.rs::tests::run_indented_command_surfaces_spawn_failure;src/output/printer.rs::tests::wrapped_segments_preserves_long_word_chunks	-	installed_show_location;where_found	covered	Utility clauses now include direct unit evidence for repo-prefix stripping while preserving `:line` suffix.
13	Output/UX Contracts Backed By Tests	463	src/commands/install.rs::cmd_install (dry-run banner);src/commands/remove.rs::remove_with_line;src/commands/system.rs::do_rebuild;src/commands/query.rs::{cmd_list,cmd_info,cmd_installed};src/output/printer.rs::*	src/output/printer.rs::tests::printer_uses_minimal_glyphs_for_plain_mode;src/output/printer.rs::tests::confirm_response_*	tests/system_command_matrix.rs::MATRIX_CASES[rebuild_success_passthrough,info_found_installed_json,info_found_installed_plain]	install_dry_run_found_stubbed;remove_dry_run;rebuild_success;list_plain;info_json_found;installed_json_success	covered	SPEC-output clauses are backed by parity baselines and system matrix stdout assertions.
14	Known Compatibility Notes For Rust Port	472	src/commands/query.rs::{cmd_where,cmd_info,cmd_list};src/commands/remove.rs::cmd_remove;src/commands/system.rs::{cmd_rebuild,check_git_preflight,check_flake};src/domain/plan.rs::build_install_plan	src/domain/plan.rs::tests::safety_nxs_missing_attr_errors;src/domain/plan.rs::tests::safety_nur_missing_attr_errors	tests/system_command_matrix.rs::MATRIX_CASES[remove_missing_args_parser_error,rebuild_git_preflight_failure_short_circuit,rebuild_flake_check_failure_short_circuit]	where_not_found;remove_dry_run_not_found;info_json_not_found;list_invalid_source;rebuild_flake_check_failure;rebuild_git_preflight_failure	covered	Permissive and hard-fail compatibility notes are implemented and evidence-backed.
