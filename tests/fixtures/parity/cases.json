[
  {
    "id": "where_found",
    "args": ["where", "ripgrep"],
    "rust_parity": true
  },
  {
    "id": "where_not_found",
    "args": ["where", "not-a-real-package"],
    "rust_parity": true
  },
  {
    "id": "where_missing_arg",
    "args": ["where"],
    "rust_parity": true
  },
  {
    "id": "search_found_stubbed",
    "args": ["search", "ripgrep"],
    "setup": "stub_info_sources",
    "python_parity": false,
    "python_parity_reason": "Search command is Rust-only; Python reference CLI does not expose this command.",
    "rust_parity": true
  },
  {
    "id": "search_not_found_stubbed",
    "args": ["search", "not-a-real-package"],
    "setup": "stub_info_sources",
    "python_parity": false,
    "python_parity_reason": "Search command is Rust-only; Python reference CLI does not expose this command.",
    "rust_parity": true
  },
  {
    "id": "search_json_found_stubbed",
    "args": ["search", "ripgrep", "--json"],
    "setup": "stub_info_sources",
    "python_parity": false,
    "python_parity_reason": "Search command is Rust-only; Python reference CLI does not expose this command.",
    "rust_parity": true
  },
  {
    "id": "search_bleeding_edge_stubbed",
    "args": ["search", "ripgrep", "--bleeding-edge"],
    "setup": "stub_info_sources_bleeding_edge",
    "python_parity": false,
    "python_parity_reason": "Search command is Rust-only; Python reference CLI does not expose this command.",
    "rust_parity": true
  },
  {
    "id": "list_plain",
    "args": ["list", "--plain"],
    "rust_parity": true
  },
  {
    "id": "list_plain_default_launchd_service",
    "args": ["list", "--plain"],
    "setup": "default_launchd_service",
    "rust_parity": true
  },
  {
    "id": "list_json",
    "args": ["list", "--json"],
    "rust_parity": true
  },
  {
    "id": "list_invalid_source",
    "args": ["list", "nope"],
    "rust_parity": true
  },
  {
    "id": "installed_json_success",
    "args": ["installed", "ripgrep", "--json"],
    "rust_parity": true
  },
  {
    "id": "installed_json_failure",
    "args": ["installed", "not-a-real-package", "--json"],
    "rust_parity": true
  },
  {
    "id": "installed_single_found",
    "args": ["installed", "ripgrep"],
    "rust_parity": true
  },
  {
    "id": "installed_single_not_found",
    "args": ["installed", "not-a-real-package"],
    "rust_parity": true
  },
  {
    "id": "installed_show_location",
    "args": ["installed", "ripgrep", "--show-location"],
    "rust_parity": true
  },
  {
    "id": "installed_multi_all_found",
    "args": ["installed", "ripgrep", "fd"],
    "rust_parity": true
  },
  {
    "id": "installed_multi_mixed",
    "args": ["installed", "ripgrep", "not-a-real-package"],
    "rust_parity": true
  },
  {
    "id": "installed_missing_arg",
    "args": ["installed"],
    "rust_parity": true
  },
  {
    "id": "status_plain",
    "args": ["status"],
    "rust_parity": true
  },
  {
    "id": "status_plain_default_launchd_service",
    "args": ["status"],
    "setup": "default_launchd_service",
    "rust_parity": true
  },
  {
    "id": "info_json_not_found",
    "args": ["info", "not-a-real-package", "--json"],
    "rust_parity": true
  },
  {
    "id": "info_found",
    "args": ["info", "ripgrep"],
    "setup": "stub_info_sources",
    "rust_parity": true
  },
  {
    "id": "info_json_found",
    "args": ["info", "ripgrep", "--json"],
    "setup": "stub_info_sources",
    "rust_parity": true
  },
  {
    "id": "info_bleeding_edge_stubbed",
    "args": ["info", "ripgrep", "--bleeding-edge"],
    "setup": "stub_info_sources_bleeding_edge",
    "rust_parity": true
  },
  {
    "id": "info_json_sources_not_installed",
    "args": ["info", "python3Packages.requests", "--json"],
    "setup": "stub_info_sources",
    "rust_parity": true
  },
  {
    "id": "info_missing_arg",
    "args": ["info"],
    "rust_parity": true
  },
  {
    "id": "implicit_install_unqualified_token_stubbed",
    "args": ["nxrsdryrun", "--dry-run"],
    "setup": "stub_install_sources",
    "inject_global_flags": false,
    "python_parity": false,
    "python_parity_reason": "Case targets Rust CLI preprocessing route coverage; Python output spacing diverges in this flow and is covered by existing explicit-install parity cases.",
    "rust_parity": true
  },
  {
    "id": "install_dry_run_installed",
    "args": ["install", "--dry-run", "ripgrep"],
    "rust_parity": true
  },
  {
    "id": "install_cache_hit_stubbed",
    "args": ["install", "--dry-run", "nxrscachehit"],
    "setup": "stub_install_sources_cache_hit",
    "rust_parity": true
  },
  {
    "id": "install_source_selection_multi_stubbed",
    "args": ["install", "--bleeding-edge", "nxrsmulti"],
    "setup": "stub_install_sources",
    "rust_parity": true
  },
  {
    "id": "install_dry_run_found_stubbed",
    "args": ["install", "--dry-run", "nxrsdryrun"],
    "setup": "stub_install_sources",
    "rust_parity": true
  },
  {
    "id": "install_platform_incompatible_stubbed",
    "args": ["install", "--dry-run", "nxrsplatform"],
    "setup": "stub_install_sources",
    "rust_parity": true
  },
  {
    "id": "install_yes_mutates_stubbed",
    "args": ["install", "--yes", "nxrsdryrun"],
    "setup": "stub_install_sources",
    "python_parity": false,
    "python_parity_reason": "Case validates Rust non-dry-run deterministic install engine path; Python parity harness requires external AI tooling for this mutation flow.",
    "rust_parity": true
  },
  {
    "id": "install_yes_rebuild_stubbed",
    "args": ["install", "--yes", "--rebuild", "nxrsdryrun"],
    "setup": "stub_install_sources",
    "python_parity": false,
    "python_parity_reason": "Case validates Rust post-install rebuild trigger under deterministic stubs; Python parity harness requires external AI tooling for this mutation flow.",
    "rust_parity": true
  },
  {
    "id": "install_flake_input_claude_yes_stubbed",
    "args": ["install", "--yes", "--engine", "claude", "--bleeding-edge", "nxrsmulti"],
    "setup": "stub_install_sources",
    "python_parity": false,
    "python_parity_reason": "Case validates Rust flake-input modification gate and mutation path with deterministic stubs; Python parity harness requires external Claude tooling for this non-dry-run path.",
    "rust_parity": true
  },
  {
    "id": "install_missing_arg",
    "args": ["install"],
    "rust_parity": true
  },
  {
    "id": "remove_dry_run",
    "args": ["remove", "--dry-run", "ripgrep"],
    "rust_parity": true
  },
  {
    "id": "remove_dry_run_alias",
    "args": ["rm", "--dry-run", "ripgrep"],
    "rust_parity": true
  },
  {
    "id": "remove_dry_run_not_found",
    "args": ["remove", "--dry-run", "not-a-real-package"],
    "rust_parity": true
  },
  {
    "id": "remove_yes_mutates",
    "args": ["remove", "--yes", "ripgrep"],
    "rust_parity": true
  },
  {
    "id": "remove_missing_arg",
    "args": ["remove"],
    "rust_parity": true
  },
  {
    "id": "rebuild_preflight_untracked_nix",
    "args": ["rebuild"],
    "setup": "untracked_nix",
    "rust_parity": true
  },
  {
    "id": "update_success",
    "args": ["update"],
    "setup": "stub_system_success",
    "rust_parity": true
  },
  {
    "id": "update_failure",
    "args": ["update"],
    "setup": "stub_update_fail",
    "rust_parity": true
  },
  {
    "id": "update_success_passthrough",
    "args": ["update", "--", "foo"],
    "setup": "stub_system_success",
    "rust_parity": true
  },
  {
    "id": "test_success",
    "args": ["test"],
    "setup": "stub_system_success",
    "rust_parity": true
  },
  {
    "id": "test_failure",
    "args": ["test"],
    "setup": "stub_test_fail",
    "rust_parity": true
  },
  {
    "id": "test_mypy_failure",
    "args": ["test"],
    "setup": "stub_test_mypy_fail",
    "rust_parity": true
  },
  {
    "id": "test_unittest_failure",
    "args": ["test"],
    "setup": "stub_test_unittest_fail",
    "rust_parity": true
  },
  {
    "id": "rebuild_success",
    "args": ["rebuild"],
    "setup": "stub_system_success",
    "rust_parity": true
  },
  {
    "id": "rebuild_success_passthrough",
    "args": ["rebuild", "--", "foo"],
    "setup": "stub_system_success",
    "rust_parity": true
  },
  {
    "id": "rebuild_flake_check_failure",
    "args": ["rebuild"],
    "setup": "stub_rebuild_flake_check_fail",
    "rust_parity": true
  },
  {
    "id": "rebuild_git_preflight_failure",
    "args": ["rebuild"],
    "setup": "stub_rebuild_git_preflight_fail",
    "rust_parity": true
  },
  {
    "id": "undo_clean",
    "args": ["undo"],
    "rust_parity": true
  },
  {
    "id": "undo_dirty_cancelled",
    "args": ["undo"],
    "setup": "modified_tracked_file",
    "rust_parity": true
  },
  {
    "id": "undo_dirty_confirmed",
    "args": ["undo"],
    "stdin": "y\n",
    "setup": "modified_tracked_file",
    "rust_parity": true
  },
  {
    "id": "upgrade_flake_failure",
    "args": ["upgrade", "--no-ai"],
    "setup": "stub_update_fail",
    "rust_parity": true
  },
  {
    "id": "upgrade_brew_stubbed_no_updates",
    "args": ["upgrade", "--skip-rebuild", "--skip-commit", "--no-ai"],
    "setup": "stub_system_success",
    "rust_parity": true
  },
  {
    "id": "upgrade_brew_stubbed_with_updates",
    "args": ["upgrade", "--skip-commit", "--no-ai"],
    "setup": "stub_upgrade_brew_outdated",
    "rust_parity": true
  },
  {
    "id": "upgrade_brew_stubbed_with_updates_dry_run",
    "args": ["upgrade", "--dry-run", "--no-ai"],
    "setup": "stub_upgrade_brew_outdated",
    "rust_parity": true
  },
  {
    "id": "upgrade_brew_stubbed_with_updates_skip_rebuild",
    "args": ["upgrade", "--skip-rebuild", "--skip-commit", "--no-ai"],
    "setup": "stub_upgrade_brew_outdated",
    "rust_parity": true
  },
  {
    "id": "upgrade_dry_run_skip_brew",
    "args": ["upgrade", "--dry-run", "--skip-brew"],
    "rust_parity": true
  },
  {
    "id": "upgrade_flake_changed_commits_lockfile",
    "args": ["upgrade", "--skip-brew", "--skip-rebuild", "--no-ai"],
    "setup": "stub_upgrade_flake_changed",
    "rust_parity": true
  },
  {
    "id": "upgrade_flake_changed_skip_commit",
    "args": ["upgrade", "--skip-brew", "--skip-rebuild", "--skip-commit", "--no-ai"],
    "setup": "stub_upgrade_flake_changed",
    "rust_parity": true
  },
  {
    "id": "upgrade_flake_unchanged_no_skip_commit",
    "args": ["upgrade", "--skip-brew", "--skip-rebuild", "--no-ai"],
    "setup": "stub_system_success",
    "rust_parity": true
  },
  {
    "id": "upgrade_flake_passthrough_stubbed",
    "args": ["upgrade", "--skip-brew", "--skip-rebuild", "--skip-commit", "--no-ai", "--", "--commit-lock-file", "foo"],
    "setup": "stub_system_success",
    "rust_parity": true
  },
  {
    "id": "upgrade_flake_stubbed",
    "args": ["upgrade", "--skip-brew", "--skip-rebuild", "--skip-commit"],
    "setup": "stub_system_success",
    "rust_parity": true
  }
]
